apiVersion: monitoring.coreos.com/v1alpha1
kind: AlertmanagerConfig
metadata:
  name: telegram
  namespace: monitoring
  labels:
    release: monitoring
spec:
  route:
    receiver: telegram
    groupBy: ["alertname", "namespace"]
    routes:
      - matchers:
          - name: alertname
            value: Watchdog
            matchType: "="
        receiver: "null"
      - matchers:
          - name: alertname
            value: AlertmanagerFailedToSendAlert
            matchType: "="
        receiver: "null"
      - matchers:
          - name: alertname
            value: ServiceDown
            matchType: "="
        receiver: telegram
  receivers:
    - name: "null"
    - name: telegram
      telegramConfigs:
        - botToken:
            name: telegram-bot-token
            key: token
          chatID: -4845707611
          parseMode: HTML
          sendResolved: true
          message: |
            üö® <b>–°–µ—Ä–≤–∏—Å –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ Health-check –∑–∞–ø—Ä–æ—Å –±–æ–ª—å—à–µ –º–∏–Ω—É—Ç—ã</b>
            <b>URL:</b> {{ .CommonLabels.instance }}
